<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daily Muse - çµæ„Ÿè½¬å°çº¢ä¹¦ç¬”è®°</title>
  <!-- å¼•å…¥å¤–éƒ¨èµ„æº -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  
  <!-- Tailwindé…ç½® -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // åŒ—æ¬§é£æ ¼è«å…°è¿ªè‰²è°ƒ
            primary: '#9FA8A3', // æµ…ç°ç»¿
            secondary: '#D8C3A5', // æµ…ç±³è‰²
            accent: '#8E7C93', // æ·¡ç´«ç°
            neutral: '#F8F5F2', // å¥¶æ²¹ç™½
            dark: '#595959', // æ·±ç°
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          boxShadow: {
            'nordic': '0 4px 20px rgba(0, 0, 0, 0.05)',
          }
        },
      }
    }
  </script>
  
  <!-- è‡ªå®šä¹‰æ ·å¼ -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .nordic-border {
        border: 1px solid rgba(159, 168, 163, 0.1);
      }
      .text-balance {
        text-wrap: balance;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    }
    
    /* å…¨å±€æ ·å¼ */
    body {
      background-color: #F8F5F2;
      color: #595959;
      font-family: 'Inter', sans-serif;
    }
    
    /* åŠ¨ç”»æ•ˆæœ */
    .slide-up {
      animation: slideUp 0.3s ease-out;
    }
    
    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* è¾“å…¥æ¡†ç„¦ç‚¹æ ·å¼ */
    .input-focus:focus {
      border-color: #8E7C93;
      box-shadow: 0 0 0 2px rgba(142, 124, 147, 0.2);
    }
  </style>
</head>

<body class="min-h-screen flex flex-col">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <header class="sticky top-0 z-50 bg-neutral/95 backdrop-blur-sm shadow-nordic">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center">
          <i class="fa fa-lightbulb-o text-accent text-lg"></i>
        </div>
        <h1 class="text-xl font-medium text-dark">Daily Muse</h1>
      </div>
      
      <nav class="flex items-center gap-4">
        <button id="homeBtn" class="text-dark/80 hover:text-accent transition-colors">
          <i class="fa fa-home text-lg"></i>
        </button>
        <button id="savedBtn" class="text-dark/80 hover:text-accent transition-colors">
          <i class="fa fa-bookmark-o text-lg"></i>
        </button>
        <button id="profileBtn" class="w-8 h-8 rounded-full bg-secondary/30 flex items-center justify-center">
          <i class="fa fa-user-o text-dark/70"></i>
        </button>
      </nav>
    </div>
  </header>

  <!-- ä¸»å†…å®¹åŒº -->
  <main class="flex-1 container mx-auto px-4 py-6">
    <!-- é¦–é¡µ/çµæ„Ÿè®°å½•é¡µé¢ -->
    <section id="inspirationPage" class="slide-up">
      <div class="max-w-2xl mx-auto">
        <h2 class="text-[clamp(1.5rem,3vw,2rem)] font-medium text-dark mb-6">è®°å½•ä½ çš„çµæ„Ÿ</h2>
        
        <!-- çµæ„Ÿè¾“å…¥å¡ç‰‡ -->
        <div class="bg-white rounded-xl shadow-nordic p-5 mb-6 nordic-border">
          <div class="mb-4">
            <label for="inspirationText" class="block text-dark/80 mb-2 text-sm">æˆ‘çš„æ‰€æ€æ‰€æƒ³</label>
            <textarea 
              id="inspirationText" 
              class="w-full h-40 rounded-lg nordic-border p-3 input-focus resize-none transition-all focus:outline-none text-dark"
              placeholder="åœ¨è¿™é‡Œè®°å½•ä¸‹ä½ ä»Šå¤©çš„æ„Ÿæ‚Ÿã€è§‚å¯Ÿæˆ–æƒ³æ³•..."></textarea>
          </div>
          
          <!-- é“¾æ¥æ·»åŠ åŒºåŸŸ -->
          <div class="mb-4">
            <label class="block text-dark/80 mb-2 text-sm">ç›¸å…³é“¾æ¥ (å¯é€‰)</label>
            <div class="flex gap-2 mb-3">
              <input 
                type="url" 
                id="linkInput" 
                class="flex-1 rounded-lg nordic-border p-3 input-focus focus:outline-none text-dark"
                placeholder="æ·»åŠ æ’­å®¢ã€è§†é¢‘æˆ–ç¤¾äº¤åª’ä½“é“¾æ¥">
              <button id="addLinkBtn" class="bg-accent/90 hover:bg-accent text-white px-4 rounded-lg transition-colors">
                <i class="fa fa-plus"></i>
              </button>
            </div>
            
            <!-- å·²æ·»åŠ çš„é“¾æ¥åˆ—è¡¨ -->
            <div id="linksList" class="flex flex-wrap gap-2 min-h-[40px]"></div>
          </div>
          
          <!-- AIå¯¹è¯å…¥å£ -->
          <button id="chatWithAIBtn" class="w-full py-3 rounded-lg bg-primary/20 text-dark hover:bg-primary/30 transition-colors mb-4 flex items-center justify-center gap-2">
            <i class="fa fa-comments-o"></i>
            <span>ä¸AIèŠèŠæˆ‘çš„çµæ„Ÿ</span>
          </button>
          
          <!-- ç”Ÿæˆç¬”è®°æŒ‰é’® -->
          <button id="generateNoteBtn" class="w-full py-3 rounded-lg bg-accent text-white hover:bg-accent/90 transition-colors flex items-center justify-center gap-2">
            <i class="fa fa-magic"></i>
            <span>ç”Ÿæˆå°çº¢ä¹¦ç¬”è®°</span>
          </button>
        </div>
        
        <!-- çµæ„Ÿå¡ç‰‡åˆ—è¡¨ -->
        <div class="mb-8">
          <h3 class="text-lg font-medium text-dark mb-4">æˆ‘çš„çµæ„Ÿåº“</h3>
          <div id="inspirationCards" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- ç¤ºä¾‹çµæ„Ÿå¡ç‰‡ -->
            <div class="bg-white rounded-xl shadow-nordic p-4 nordic-border hover:shadow-lg transition-shadow cursor-pointer">
              <p class="text-dark/90 line-clamp-3 mb-2">ä»Šå¤©å¬äº†ä¸€æœŸå…³äºæ—¶é—´ç®¡ç†çš„æ’­å®¢ï¼Œå­¦åˆ°äº†ç•ªèŒ„å·¥ä½œæ³•çš„æ–°ç”¨æ³•...</p>
              <div class="flex items-center justify-between text-sm text-dark/60">
                <span>2025.12.04</span>
                <div class="flex gap-2">
                  <button class="hover:text-accent transition-colors"><i class="fa fa-pencil"></i></button>
                  <button class="hover:text-accent transition-colors"><i class="fa fa-share-alt"></i></button>
                </div>
              </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-nordic p-4 nordic-border hover:shadow-lg transition-shadow cursor-pointer">
              <p class="text-dark/90 line-clamp-3 mb-2">åœ¨å’–å•¡é¦†è§‚å¯Ÿåˆ°äººä»¬çš„å·¥ä½œçŠ¶æ€ï¼Œå‘ç°ç¯å¢ƒå¯¹æ•ˆç‡çš„å½±å“å¾ˆå¤§...</p>
              <div class="flex items-center justify-between text-sm text-dark/60">
                <span>2025.12.03</span>
                <div class="flex gap-2">
                  <button class="hover:text-accent transition-colors"><i class="fa fa-pencil"></i></button>
                  <button class="hover:text-accent transition-colors"><i class="fa fa-share-alt"></i></button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- AIå¯¹è¯é¡µé¢ (é»˜è®¤éšè—) -->
    <section id="chatPage" class="hidden fade-in max-w-2xl mx-auto">
      <div class="flex items-center gap-2 mb-6">
        <button id="backToInspirationBtn" class="text-dark/70 hover:text-accent transition-colors">
          <i class="fa fa-arrow-left"></i>
        </button>
        <h2 class="text-xl font-medium text-dark">ä¸AIäº¤æµçµæ„Ÿ</h2>
      </div>
      
      <!-- å¯¹è¯å®¹å™¨ -->
      <div id="chatContainer" class="bg-white rounded-xl shadow-nordic p-4 nordic-border h-[60vh] flex flex-col gap-4 overflow-y-auto scrollbar-hide mb-6">
        <!-- AIæ¬¢è¿æ¶ˆæ¯ -->
        <div class="flex gap-3 w-full">
          <div class="w-8 h-8 rounded-full bg-accent/20 flex-shrink-0 flex items-center justify-center">
            <i class="fa fa-robot text-accent"></i>
          </div>
          <div class="bg-neutral rounded-xl p-3 rounded-tl-none max-w-[80%]">
            <p class="text-dark">ä½ å¥½ï¼å¾ˆé«˜å…´èƒ½å’Œä½ èŠèŠä½ çš„çµæ„Ÿã€‚æ— è®ºæ˜¯æƒ³æ‰©å±•æ€è·¯ã€æ·±å…¥æ¢è®¨æŸä¸ªæƒ³æ³•ï¼Œè¿˜æ˜¯éœ€è¦åˆ›ä½œå»ºè®®ï¼Œæˆ‘éƒ½åœ¨è¿™é‡Œå¸®åŠ©ä½ ã€‚</p>
          </div>
        </div>
      </div>
      
      <!-- è¾“å…¥åŒºåŸŸ -->
      <div class="flex gap-2">
        <input 
          id="chatInput" 
          class="flex-1 rounded-lg nordic-border p-3 input-focus focus:outline-none text-dark"
          placeholder="è¾“å…¥ä½ æƒ³å’ŒAIäº¤æµçš„å†…å®¹...">
        <button id="sendChatBtn" class="bg-accent text-white p-3 rounded-lg hover:bg-accent/90 transition-colors">
          <i class="fa fa-paper-plane"></i>
        </button>
      </div>
    </section>
    
    <!-- ç¬”è®°ç”Ÿæˆé¡µé¢ (é»˜è®¤éšè—) -->
    <section id="generatePage" class="hidden fade-in max-w-2xl mx-auto">
      <div class="flex items-center gap-2 mb-6">
        <button id="backToGenerateBtn" class="text-dark/70 hover:text-accent transition-colors">
          <i class="fa fa-arrow-left"></i>
        </button>
        <h2 class="text-xl font-medium text-dark">ç”Ÿæˆå°çº¢ä¹¦ç¬”è®°</h2>
      </div>
      
      <!-- é£æ ¼é€‰æ‹© -->
      <div class="bg-white rounded-xl shadow-nordic p-4 nordic-border mb-6">
        <h3 class="text-dark font-medium mb-3">é€‰æ‹©ç¬”è®°é£æ ¼</h3>
        <div class="grid grid-cols-3 gap-3">
          <button class="styleBtn active py-2 rounded-lg bg-accent/10 text-accent border border-accent/20 hover:bg-accent/20 transition-colors" data-style="thinking">
            <i class="fa fa-lightbulb-o block mb-1"></i>
            <span class="text-sm">æ€è€ƒæ„Ÿæ‚Ÿç±»</span>
          </button>
          <button class="styleBtn py-2 rounded-lg bg-neutral text-dark/70 border border-transparent hover:bg-primary/10 transition-colors" data-style="efficiency">
            <i class="fa fa-tasks block mb-1"></i>
            <span class="text-sm">å·¥å…·æ•ˆç‡ç±»</span>
          </button>
          <button class="styleBtn py-2 rounded-lg bg-neutral text-dark/70 border border-transparent hover:bg-primary/10 transition-colors" data-style="interaction">
            <i class="fa fa-comments block mb-1"></i>
            <span class="text-sm">æé—®äº’åŠ¨ç±»</span>
          </button>
        </div>
      </div>
      
      <!-- ç”ŸæˆæŒ‰é’® -->
      <button id="createNoteBtn" class="w-full py-3 rounded-lg bg-accent text-white hover:bg-accent/90 transition-colors flex items-center justify-center gap-2 mb-6">
        <i class="fa fa-pencil"></i>
        <span>ç«‹å³ç”Ÿæˆç¬”è®°</span>
      </button>
    </section>
    
    <!-- ç»“æœå±•ç¤ºé¡µé¢ (é»˜è®¤éšè—) -->
    <section id="resultPage" class="hidden fade-in max-w-2xl mx-auto">
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-2">
          <button id="backToResultBtn" class="text-dark/70 hover:text-accent transition-colors">
            <i class="fa fa-arrow-left"></i>
          </button>
          <h2 class="text-xl font-medium text-dark">å°çº¢ä¹¦ç¬”è®°é¢„è§ˆ</h2>
        </div>
        <button id="saveNoteBtn" class="bg-accent/90 hover:bg-accent text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-1">
          <i class="fa fa-save"></i>
          <span>ä¿å­˜ç¬”è®°</span>
        </button>
      </div>
      
      <!-- ç¬”è®°å†…å®¹å¡ç‰‡ -->
      <div class="bg-white rounded-xl shadow-nordic p-5 nordic-border mb-6">
        <div class="flex justify-between items-center mb-4">
          <span class="text-sm text-dark/60">å­—æ•°: <span id="wordCount">0</span></span>
          <div class="flex gap-2">
            <button id="copyBtn" class="text-accent hover:text-accent/80 transition-colors text-sm flex items-center gap-1">
              <i class="fa fa-copy"></i>
              å¤åˆ¶
            </button>
            <button id="editBtn" class="text-accent hover:text-accent/80 transition-colors text-sm flex items-center gap-1">
              <i class="fa fa-edit"></i>
              ç¼–è¾‘
            </button>
          </div>
        </div>
        
        <div id="noteContent" class="text-dark mb-6 whitespace-pre-line">
          <!-- ç”Ÿæˆçš„ç¬”è®°å†…å®¹ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
          ğŸŒŸ æ—¶é—´ç®¡ç†çš„æ–°æ€è€ƒ | ç•ªèŒ„å·¥ä½œæ³•çš„è¿›é˜¶ç”¨æ³•
          
          ä»Šå¤©å¬å®Œä¸€æœŸå…³äºæ—¶é—´ç®¡ç†çš„æ’­å®¢ï¼ŒçœŸçš„åˆ·æ–°äº†æˆ‘å¯¹ç•ªèŒ„å·¥ä½œæ³•çš„è®¤çŸ¥âœ¨
          
          åŸæ¥ä¸æ˜¯æœºæ¢°åœ°éµå®ˆ25åˆ†é’Ÿå·¥ä½œ+5åˆ†é’Ÿä¼‘æ¯ï¼Œè€Œæ˜¯è¦æ ¹æ®ä¸åŒä»»åŠ¡ç±»å‹è°ƒæ•´æ—¶é—´å—çš„é•¿åº¦ã€‚åˆ›é€ æ€§å·¥ä½œéœ€è¦æ›´é•¿çš„ä¸“æ³¨æ—¶é—´ï¼Œè€Œç®€å•çš„äº‹åŠ¡æ€§å·¥ä½œå¯ä»¥ç¼©çŸ­ã€‚
          
          ğŸ”‘ æˆ‘çš„å‡ ç‚¹æ„Ÿæ‚Ÿï¼š
          1. çµæ´»è°ƒæ•´æ¯”ä¸¥æ ¼éµå®ˆæ›´é‡è¦
          2. è®°å½•ä¸­æ–­åŸå› ï¼ŒæŒç»­ä¼˜åŒ–ä¸“æ³¨çŠ¶æ€
          3. ä¼‘æ¯ä¸æ˜¯æµªè´¹æ—¶é—´ï¼Œè€Œæ˜¯ä¸ºäº†æ›´é«˜æ•ˆç‡
          
          ä½ ä»¬æœ‰ä»€ä¹ˆæ—¶é—´ç®¡ç†çš„å°æŠ€å·§å—ï¼Ÿè¯„è®ºåŒºèŠèŠï½
          
          #æ—¶é—´ç®¡ç† #ç•ªèŒ„å·¥ä½œæ³• #æ•ˆç‡æå‡ #è‡ªæˆ‘æå‡ #èŒåœºæŠ€å·§
        </div>
        
        <!-- é…å›¾æ¨èåŒºåŸŸ -->
        <div>
          <h3 class="text-dark font-medium mb-3">æ¨èé…å›¾</h3>
          <div class="grid grid-cols-3 gap-2 mb-4">
            <!-- ç›¸å†Œé€‰æ‹©æŒ‰é’® -->
            <label class="relative aspect-square rounded-lg bg-neutral flex items-center justify-center cursor-pointer hover:bg-primary/10 transition-colors">
              <input type="file" accept="image/*" multiple class="absolute opacity-0 w-full h-full">
              <div class="text-center text-dark/70">
                <i class="fa fa-camera text-xl block mb-1"></i>
                <span class="text-xs">ä»ç›¸å†Œé€‰æ‹©</span>
              </div>
            </label>
            
            <!-- ç¤ºä¾‹å›¾ç‰‡ -->
            <div class="aspect-square rounded-lg bg-secondary/20 overflow-hidden">
              <img src="https://picsum.photos/seed/note1/300/300" alt="ç¬”è®°é…å›¾" class="w-full h-full object-cover">
            </div>
            <div class="aspect-square rounded-lg bg-secondary/20 overflow-hidden">
              <img src="https://picsum.photos/seed/note2/300/300" alt="ç¬”è®°é…å›¾" class="w-full h-full object-cover">
            </div>
          </div>
        </div>
      </div>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <div class="flex gap-3">
        <button id="regenerateBtn" class="flex-1 py-3 rounded-lg bg-primary/20 text-dark hover:bg-primary/30 transition-colors">
          é‡æ–°ç”Ÿæˆ
        </button>
        <button id="shareBtn" class="flex-1 py-3 rounded-lg bg-accent text-white hover:bg-accent/90 transition-colors">
          åˆ†äº«ç¬”è®°
        </button>
      </div>
    </section>
  </main>

  <!-- åº•éƒ¨å¯¼èˆªæ  (ç§»åŠ¨ç«¯) -->
  <footer class="md:hidden sticky bottom-0 bg-white shadow-[0_-2px_10px_rgba(0,0,0,0.05)] py-3 px-6">
    <div class="flex justify-around">
      <button class="flex flex-col items-center text-accent">
        <i class="fa fa-pencil text-lg"></i>
        <span class="text-xs mt-1">è®°å½•çµæ„Ÿ</span>
      </button>
      <button class="flex flex-col items-center text-dark/60 hover:text-accent transition-colors">
        <i class="fa fa-comments-o text-lg"></i>
        <span class="text-xs mt-1">AIå¯¹è¯</span>
      </button>
      <button class="flex flex-col items-center text-dark/60 hover:text-accent transition-colors">
        <i class="fa fa-bookmark-o text-lg"></i>
        <span class="text-xs mt-1">æˆ‘çš„ç¬”è®°</span>
      </button>
    </div>
  </footer>

  <!-- JavaScript åŠŸèƒ½å®ç° -->
  <script>
    // DOMå…ƒç´ 
    const inspirationPage = document.getElementById('inspirationPage');
    const chatPage = document.getElementById('chatPage');
    const generatePage = document.getElementById('generatePage');
    const resultPage = document.getElementById('resultPage');
    
    const chatWithAIBtn = document.getElementById('chatWithAIBtn');
    const generateNoteBtn = document.getElementById('generateNoteBtn');
    const backToInspirationBtn = document.getElementById('backToInspirationBtn');
    const backToGenerateBtn = document.getElementById('backToGenerateBtn');
    const backToResultBtn = document.getElementById('backToResultBtn');
    const homeBtn = document.getElementById('homeBtn');
    const addLinkBtn = document.getElementById('addLinkBtn');
    const linkInput = document.getElementById('linkInput');
    const linksList = document.getElementById('linksList');
    const sendChatBtn = document.getElementById('sendChatBtn');
    const chatInput = document.getElementById('chatInput');
    const chatContainer = document.getElementById('chatContainer');
    const createNoteBtn = document.getElementById('createNoteBtn');
    const styleBtns = document.querySelectorAll('.styleBtn');
    const saveNoteBtn = document.getElementById('saveNoteBtn');
    const copyBtn = document.getElementById('copyBtn');
    const wordCount = document.getElementById('wordCount');
    const noteContent = document.getElementById('noteContent');
    
    // é“¾æ¥æ•°ç»„
    let links = [];
    
    // é¡µé¢åˆ‡æ¢å‡½æ•°
    function showPage(page) {
      inspirationPage.classList.add('hidden');
      chatPage.classList.add('hidden');
      generatePage.classList.add('hidden');
      resultPage.classList.add('hidden');
      
      page.classList.remove('hidden');
      page.scrollIntoView({ behavior: 'smooth' });
    }
    
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      // è®¡ç®—åˆå§‹å­—æ•°
      updateWordCount();
      
      // é¦–é¡µæŒ‰é’®
      homeBtn.addEventListener('click', () => showPage(inspirationPage));
      
      // AIå¯¹è¯æŒ‰é’®
      chatWithAIBtn.addEventListener('click', () => showPage(chatPage));
      
      // è¿”å›æŒ‰é’®
      backToInspirationBtn.addEventListener('click', () => showPage(inspirationPage));
      backToGenerateBtn.addEventListener('click', () => showPage(inspirationPage));
      backToResultBtn.addEventListener('click', () => showPage(generatePage));
      
      // ç”Ÿæˆç¬”è®°æŒ‰é’®
      generateNoteBtn.addEventListener('click', () => showPage(generatePage));
      
      // æ·»åŠ é“¾æ¥
      addLinkBtn.addEventListener('click', addLink);
      linkInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') addLink();
      });
      
      // å‘é€èŠå¤©æ¶ˆæ¯
      sendChatBtn.addEventListener('click', sendChatMessage);
      chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendChatMessage();
      });
      
      // é£æ ¼é€‰æ‹©
      styleBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          styleBtns.forEach(b => {
            b.classList.remove('active', 'bg-accent/10', 'text-accent', 'border-accent/20');
            b.classList.add('bg-neutral', 'text-dark/70', 'border-transparent');
          });
          btn.classList.add('active', 'bg-accent/10', 'text-accent', 'border-accent/20');
          btn.classList.remove('bg-neutral', 'text-dark/70', 'border-transparent');
        });
      });
      
      // åˆ›å»ºç¬”è®°
      createNoteBtn.addEventListener('click', () => {
        showPage(resultPage);
        updateWordCount();
      });
      
      // ä¿å­˜ç¬”è®°
      saveNoteBtn.addEventListener('click', saveNote);
      
      // å¤åˆ¶ç¬”è®°
      copyBtn.addEventListener('click', copyNote);
    });
    
    // æ·»åŠ é“¾æ¥å‡½æ•°
    function addLink() {
      const link = linkInput.value.trim();
      if (link && !links.includes(link)) {
        links.push(link);
        
        // åˆ›å»ºé“¾æ¥æ ‡ç­¾
        const linkTag = document.createElement('div');
        linkTag.className = 'bg-neutral rounded-full px-3 py-1 flex items-center gap-2 text-sm';
        linkTag.innerHTML = `
          <i class="fa fa-link text-dark/60"></i>
          <span class="truncate max-w-[150px]">${link}</span>
          <button class="text-dark/50 hover:text-accent transition-colors" onclick="removeLink(this, '${link}')">
            <i class="fa fa-times"></i>
          </button>
        `;
        
        linksList.appendChild(linkTag);
        linkInput.value = '';
      }
    }
    
    // ç§»é™¤é“¾æ¥å‡½æ•°
    window.removeLink = function(btn, link) {
      const index = links.indexOf(link);
      if (index > -1) {
        links.splice(index, 1);
      }
      btn.parentElement.remove();
    }
    
    // å‘é€èŠå¤©æ¶ˆæ¯
    function sendChatMessage() {
      const message = chatInput.value.trim();
      if (message) {
        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        const userMessage = document.createElement('div');
        userMessage.className = 'flex gap-3 w-full justify-end';
        userMessage.innerHTML = `
          <div class="bg-accent/10 rounded-xl p-3 rounded-tr-none max-w-[80%]">
            <p class="text-dark">${message}</p>
          </div>
          <div class="w-8 h-8 rounded-full bg-secondary/20 flex-shrink-0 flex items-center justify-center">
            <i class="fa fa-user-o text-dark/70"></i>
          </div>
        `;
        chatContainer.appendChild(userMessage);
        
        chatInput.value = '';
        chatContainer.scrollTop = chatContainer.scrollHeight;
        
        // æ¨¡æ‹ŸAIå›å¤
        setTimeout(() => {
          const aiMessage = document.createElement('div');
          aiMessage.className = 'flex gap-3 w-full';
          aiMessage.innerHTML = `
            <div class="w-8 h-8 rounded-full bg-accent/20 flex-shrink-0 flex items-center justify-center">
              <i class="fa fa-robot text-accent"></i>
            </div>
            <div class="bg-neutral rounded-xl p-3 rounded-tl-none max-w-[80%]">
              <p class="text-dark">ä½ çš„æƒ³æ³•å¾ˆæœ‰æ„æ€ï¼æˆ‘è§‰å¾—å¯ä»¥ä»${getRandomTopic()}è§’åº¦è¿›ä¸€æ­¥å±•å¼€ï¼Œè¿™æ ·èƒ½è®©ç¬”è®°æ›´æœ‰æ·±åº¦å’Œå¸å¼•åŠ›ã€‚ä½ æƒ³å…·ä½“èŠèŠå“ªä¸ªæ–¹é¢ï¼Ÿ</p>
            </div>
          `;
          chatContainer.appendChild(aiMessage);
          chatContainer.scrollTop = chatContainer.scrollHeight;
        }, 1000);
      }
    }
    
    // éšæœºè¯é¢˜ç”Ÿæˆ
    function getRandomTopic() {
      const topics = ['ç”¨æˆ·ç—›ç‚¹', 'ä¸ªäººä½“éªŒ', 'å®ç”¨æŠ€å·§', 'æƒ…æ„Ÿå…±é¸£', 'æ•°æ®æ”¯æ’‘', 'æ¡ˆä¾‹åˆ†æ'];
      return topics[Math.floor(Math.random() * topics.length)];
    }
    
    // æ›´æ–°å­—æ•°ç»Ÿè®¡
    function updateWordCount() {
      const content = noteContent.textContent || '';
      const count = content.replace(/\s+/g, '').length;
      wordCount.textContent = count;
    }
    
    // ä¿å­˜ç¬”è®°
    function saveNote() {
      // æ¨¡æ‹Ÿä¿å­˜æˆåŠŸ
      const originalText = saveNoteBtn.innerHTML;
      saveNoteBtn.innerHTML = '<i class="fa fa-check"></i> <span>å·²ä¿å­˜</span>';
      saveNoteBtn.classList.add('bg-primary');
      
      setTimeout(() => {
        saveNoteBtn.innerHTML = originalText;
        saveNoteBtn.classList.remove('bg-primary');
        alert('ç¬”è®°å·²æˆåŠŸä¿å­˜åˆ°ä½ çš„çµæ„Ÿåº“ï¼');
      }, 1500);
    }
    
    // å¤åˆ¶ç¬”è®°
    function copyNote() {
      const content = noteContent.textContent;
      navigator.clipboard.writeText(content).then(() => {
        const originalText = copyBtn.innerHTML;
        copyBtn.innerHTML = '<i class="fa fa-check"></i> å·²å¤åˆ¶';
        
        setTimeout(() => {
          copyBtn.innerHTML = originalText;
        }, 1500);
      });
    }
  </script>
</body>
</html>